

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Full Documentation &#8212; datashuttle</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'pages/documentation';</script>
    <link rel="canonical" href="https://datashuttle.neuroinformatics.dev/pages/documentation.html" />
    <link rel="shortcut icon" href="../_static/logo_light.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo_light.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo_dark.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
    <p class="title logo__title">DataShuttle. version: 0.1.dev1+g2630bdf</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/neuroinformatics-unit/datashuttle" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/neuroinformatics-unit/datashuttle" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Full Documentation</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="full-documentation">
<h1>Full Documentation<a class="headerlink" href="#full-documentation" title="Permalink to this heading">#</a></h1>
<p>Datashuttle is a work in progress as has not been officially released. It is not ready for use
as documented, please await first official release.</p>
<p>DataShuttle helps to manage and transfer a project with many “local” machines all connected to a “central” machine.
DataShuttle has functions to help:</p>
<ul class="simple">
<li><p>Generate BIDS-formatted folder structures</p></li>
<li><p>Transfer data between central and local machines</p></li>
</ul>
<p>On first setup, it is necessary to specify the project name, paths to the local project folder (typically empty on first use, on a
local filesystem), and paths to central project folder and the connection method.</p>
<p>This documentation gives examples both using the API (in the python console) or using the command line interface (in system terminal).</p>
<section id="datashuttle-configs">
<h2>DataShuttle Configs<a class="headerlink" href="#datashuttle-configs" title="Permalink to this heading">#</a></h2>
<section id="configuration-file">
<h3>Configuration File<a class="headerlink" href="#configuration-file" title="Permalink to this heading">#</a></h3>
<p>To get started, import DataShuttle and initialise the class with the project name. If using the command
line this step is not necessary.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datashuttle.datashuttle</span> <span class="kn">import</span> <span class="n">DataShuttle</span>

<span class="n">project</span> <span class="o">=</span> <span class="n">DataShuttle</span><span class="p">(</span><span class="s2">&quot;my_project&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The first time you use DataShuttle, you will be prompted to make a configuration file containing project information.</p>
<p>To setup the configuration, use the “make_config_file” function.</p>
<p>The “local_path” argument is required to specify the top-level path to your project. This will typically be empty
on first use, and should include the name of the project.</p>
<p>e.g. if the local_path=“/path/to/my_project”, when making a new subject (e.g. sub-001) this will be
made at /path/to/my_project/rawdata/sub-001.</p>
<p>Next, the “central_path” argument gives the path to the central machine project. This may be on a local
filesystem (e.g. if a HPC or network drive is mounted) or using SSH. On Linux systems, ~ syntax is
not supported and the full filepath must be input.</p>
<p>Also required is the “connection_method”. This can either be “local_filesystem” or “ssh”. If “ssh”,
then the “central_host_id” and “central_host_username” options are also required (see example below).</p>
<p>The options “use_ephys”, “use_behav”… are used to set the data types used on the local PC.
If these are not set to True, it will not be possible to make data_type folders of this type.
This option is useful if there are dedicated machines for collection of different data types.</p>
<p>Finally, the settings “overwrite_old_files_on_transfer”, “transfer_verbosity” and “show_transfer_progress” determine
the behaviour during file transfer. Please see the Data Transfer section for more information.</p>
<p>An example call may look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">make_config_file</span><span class="p">(</span>
<span class="n">local_path</span><span class="o">=</span><span class="s2">&quot;/path/to/my/my_project&quot;</span><span class="p">,</span>
<span class="n">central_path</span><span class="o">=</span><span class="s2">&quot;/nfs/nhome/live/username/&quot;</span><span class="p">,</span>
<span class="n">connection_method</span><span class="o">=</span><span class="s2">&quot;ssh&quot;</span><span class="p">,</span>
<span class="n">central_host_id</span><span class="o">=</span><span class="s2">&quot;ssh.swc.ucl.ac.uk&quot;</span><span class="p">,</span>
<span class="n">central_host_username</span><span class="o">=</span><span class="s2">&quot;username&quot;</span><span class="p">,</span>
<span class="n">overwrite_old_files_on_transfer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="n">transfer_verbosity</span><span class="o">=</span><span class="s2">&quot;v&quot;</span><span class="p">,</span>
<span class="n">show_transfer_progress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="n">use_ephys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="n">use_behav</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="n">use_histology</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
<p>or equivalently using the command-line interface</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datashuttle</span> \
<span class="n">my_project</span> \
<span class="n">make_config_file</span> \
<span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">project</span> \
<span class="o">/</span><span class="n">nfs</span><span class="o">/</span><span class="n">nhome</span><span class="o">/</span><span class="n">live</span><span class="o">/</span><span class="n">username</span><span class="o">/</span> \
<span class="n">ssh</span> \
<span class="o">--</span><span class="n">central_host_id</span> <span class="n">ssh</span><span class="o">.</span><span class="n">swc</span><span class="o">.</span><span class="n">ucl</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span> \
<span class="o">--</span><span class="n">central_host_username</span> <span class="n">username</span> \
<span class="o">--</span><span class="n">transfer_verbosity</span> <span class="n">v</span> \
<span class="o">--</span><span class="n">use</span><span class="o">-</span><span class="n">ephys</span> <span class="o">--</span><span class="n">use</span><span class="o">-</span><span class="n">behav</span> <span class="o">--</span><span class="n">use</span><span class="o">-</span><span class="n">histology</span> <span class="o">--</span><span class="n">overwrite_old_files_on_transfer</span>
</pre></div>
</div>
<p>Individual settings can be updated using update_config(), and an existing config file can be used instead using supply_config()</p>
</section>
<section id="setting-up-an-ssh-connection">
<h3>Setting up an SSH Connection<a class="headerlink" href="#setting-up-an-ssh-connection" title="Permalink to this heading">#</a></h3>
<p>Once configurations are set, if the “connection_method” is “ssh”, the function setup_ssh_connection_to_central_server() must be run to setup
the ssh connection to the central server. This will allow visual confirmation of the server key, and setup a SSH key pair. This means
your password will have to be enterred only once, when setting up this connection.</p>
</section>
</section>
<section id="making-project-folders">
<h2>Making Project Folders<a class="headerlink" href="#making-project-folders" title="Permalink to this heading">#</a></h2>
<p>Subject and session project folders can be made using the function make_sub_folders(). This function accepts a subject name (or list
of subject names), with optional session name and data type inputs. If no session or data type name is provided,
an empty subject folder will be made at the top folder level.</p>
<p>The full paths of all created folders are logged (see “Logging” below).</p>
<p>e.g.
<code class="docutils literal notranslate"><span class="pre">project.make_sub_folders(sub_names=&quot;sub-001&quot;)</span></code> or equivalently <code class="docutils literal notranslate"><span class="pre">datashuttle</span> <span class="pre">my_project</span> <span class="pre">make_sub_folders</span> <span class="pre">--sub_names</span> <span class="pre">sub-001</span></code></p>
<p>will make the folder tree</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
└── my_project/
    └── rawdata/
        └── sub-001
</pre></div>
</div>
<p>Adding a “ses_names” argument will make the specified sessions for all input subjects. Similarly, for each subject or session,
all data_types will be made. The data_type argument can be a single data_type (e.g. “behav”), a list of data_types or “all”,
that will make all data_types. Note that in all cases, only data_types that are flagged to use in the configs (e.g. use_behav=True)
will be made.</p>
<p>All subject or session names must be prefixed with “sub-” or “ses-” respectively, as according to SWC-BIDS. If these prefixes
are not input, they will be automatically added. This method will also raise an error if the session number already exists,
and any duplicate inputs will be removed. Finally, subject and session names must not contain spaces and should be
formatted according to SWC-BIDS.
e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">make_sub_folders</span><span class="p">(</span>
<span class="n">sub_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;001&quot;</span><span class="p">,</span> <span class="s2">&quot;002&quot;</span><span class="p">],</span>
<span class="n">ses_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ses-001&quot;</span><span class="p">,</span> <span class="s2">&quot;002&quot;</span><span class="p">],</span>
<span class="n">data_type</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ephys&quot;</span><span class="p">,</span> <span class="s2">&quot;behav&quot;</span><span class="p">,</span> <span class="s2">&quot;histology&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>or equivalently</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datashuttle</span> \
<span class="n">my_project</span> \
<span class="n">make_sub_folders</span> \
<span class="o">--</span><span class="n">sub</span><span class="o">-</span><span class="n">names</span> <span class="mi">001</span> <span class="mi">002</span> \
<span class="o">--</span><span class="n">ses</span><span class="o">-</span><span class="n">names</span> <span class="n">ses</span><span class="o">-</span><span class="mi">001</span> <span class="mi">002</span>
<span class="o">--</span><span class="n">data_type</span> <span class="n">ephys</span> <span class="n">behav</span> <span class="n">histology</span>
</pre></div>
</div>
<p>will create the folder structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
└── my_project/
    └── rawdata/
        ├── sub-001/
        │   ├── ses-001/
        │   │   ├── ephys
        │   │   └── behav
        │   ├── ses-002/
        │   │   ├── ephys
        │   │   └── behav
        │   └── histology
        └── sub-002/
            ├── ses-001/
            │   ├── ephys
            │   └── behav
            ├── ses-002/
            │   ├── ephys
            │   └── behav
            └── histology
</pre></div>
</div>
<section id="convenience-tags">
<h3>Convenience Tags<a class="headerlink" href="#convenience-tags" title="Permalink to this heading">#</a></h3>
<p>Tags can be added to easily format subject or session names. These tags include &#64;TO&#64;, &#64;DATE&#64;, &#64;TIME&#64;, &#64;DATETIME&#64;.</p>
<p>The &#64;TO&#64; tag can be used to create a range of subjects or sessions. Where the subject or session number is
usually written, a range can be created by placing boundaries on the range either side of the &#64;TO&#64; tag.
e.g. using sub_names=<code class="docutils literal notranslate"><span class="pre">sub-001&#64;TO&#64;003_task-retinotopy</span></code> would create three subject folders:
<code class="docutils literal notranslate"><span class="pre">sub-001_task-retinotopy,</span> <span class="pre">sub-002_task-retinotopy</span></code> and <code class="docutils literal notranslate"><span class="pre">sub-003_task-retinotopy</span></code>.</p>
<p>The &#64;DATE&#64;, &#64;TIME&#64; or &#64;DATETIME&#64; flags can be used to create date, time or datetime key-value pairs in subject or session
names, depending on the current system date / time. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">make_sub_folders</span><span class="p">(</span>
<span class="n">sub_names</span><span class="o">=</span><span class="s2">&quot;sub-001@TO@002&quot;</span><span class="p">,</span>
<span class="n">ses_names</span><span class="o">=</span><span class="s2">&quot;ses-001_@DATE@&quot;</span><span class="p">,</span>
<span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>or equivalently</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datashuttle</span> \
<span class="n">my_project</span> \
<span class="n">make_sub_folders</span> \
<span class="o">--</span><span class="n">sub_names</span> <span class="n">sub</span><span class="o">-</span><span class="mi">001</span><span class="nd">@TO</span><span class="o">@</span><span class="mi">002</span> \
<span class="o">--</span><span class="n">ses_names</span> <span class="n">ses</span><span class="o">-</span><span class="mi">001</span><span class="n">_</span><span class="nd">@DATE</span><span class="o">@</span> \
<span class="o">--</span><span class="n">data_type</span> <span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<p>would create the folder tree (assuming it is 01/02/2022)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
└── my_project/
    └── rawdata/
        ├── sub-001/
        │   └── ses-001_date-01022022
        └── sub-002/
            └── ses-001_date-01022022
</pre></div>
</div>
<p>only one &#64;DATE&#64;, &#64;TIME&#64; or &#64;DATETIME&#64; flag can be used per subject / session name.</p>
</section>
</section>
<section id="data-transfer">
<h2>Data Transfer<a class="headerlink" href="#data-transfer" title="Permalink to this heading">#</a></h2>
<p>Data transfer can be either from the local project to the central project (“upload”) or from the central to local project(“download”). Data
transfers are primarily managed using the upload_data() and download_data() functions.</p>
<p>By default, uploading or downloading data will never overwrite files when transferring data. If an
existing file with the same name is found in the target folder, even if it is older, it will not be overwritten.
All transfer activity is printed to the console and logged (see “Logging” below), which can be used to
determine if any files were not transferred for this reason.</p>
<p>To transfer all data, the keyword “all” can be used for sub_names, ses_names and data_type arguments. Note that
any existing data_type will be transferred, even if the flag use_&lt;data_type&gt; (e.g. use_behav) is False.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">project.upload_data(sub_names=&quot;all&quot;,</span> <span class="pre">ses_names=&quot;all&quot;,</span> <span class="pre">data_type=&quot;all&quot;)</span></code></p>
<p>or equivalently
<code class="docutils literal notranslate"><span class="pre">datashuttle</span> <span class="pre">my_project</span> <span class="pre">upload_data</span> <span class="pre">--sub_names</span> <span class="pre">all</span> <span class="pre">--ses_names</span> <span class="pre">all</span> <span class="pre">--data_type</span> <span class="pre">all</span></code></p>
<p>will transfer everything in the local project folder to the central. The convenience functions upload_all()
and download_all() can be used as shortcuts for this. See below for a full list of all sub_names, ses_names and data_type
keyword options.</p>
<p>A number of configuration settings define the behaviour of datashuttle during file transfer (see make_config_file). Datashuttle
uses <a class="reference external" href="https://rclone.org/">Rclone</a> for data transfer, and these options are aliases for RClone configurations.</p>
<section id="overwrite-old-files-on-transfer">
<h3>overwrite_old_files_on_transfer<a class="headerlink" href="#overwrite-old-files-on-transfer" title="Permalink to this heading">#</a></h3>
<p>By default, datashuttle will never overwrite files in the target project folders (i.e. the
folders the data is being transferred to). This is the case even if the version of the
file in the source project folder (i.e. the folder the data is being transferred from)
is newer (as indicated by the file modification timestamp.)</p>
<p>When “overwrite_old_files_on_transfer”
this behaviour is changed, and target folder files that are older than source folder
will be overwritten.</p>
</section>
<section id="transfer-verbosity">
<h3>transfer_verbosity<a class="headerlink" href="#transfer-verbosity" title="Permalink to this heading">#</a></h3>
<p>When set to vv, the console and log output will become very verbose and report all defaults. When
v (default) these will report each file that is transferred and a small number of significant events.</p>
</section>
<section id="show-transfer-progress">
<h3>show_transfer_progress<a class="headerlink" href="#show-transfer-progress" title="Permalink to this heading">#</a></h3>
<p>When true, real-time transfer statistics will be reported and logged.</p>
</section>
<section id="all-sub-names-ses-names-and-data-type-keywords">
<h3>All sub_names, ses_names and data_type keywords<a class="headerlink" href="#all-sub-names-ses-names-and-data-type-keywords" title="Permalink to this heading">#</a></h3>
<p>For each argument, the subject, session or datatype to transfer can be specified directly, e.g.
<code class="docutils literal notranslate"><span class="pre">project.upload_data(sub_names=&quot;sub-001&quot;,</span> <span class="pre">ses_names=[&quot;ses-001&quot;,</span> <span class="pre">&quot;ses-002]&quot;,</span> <span class="pre">data_type=&quot;behav&quot;</span> <span class="pre">)</span></code></p>
<p>However, a number of keyword arguments can be used to specify more general rules for transfer:</p>
<p><em>sub_names</em></p>
<p><u> all </u>: all subjects and any non-subject files or folders at the top level (e.g. under rawdata)
will be transferred <br></p>
<p><u> all_sub </u>: all subjects, but not any non-subject files or folders at the top level will be transferred  <br></p>
<p><u> all_non_sub </u>: Only non-subject folders (or files) will be transferred from the top level <br></p>
<p><em>ses_names</em></p>
<p><u> all </u>: all sessions and any non-session or non-data-type files or folders at the subject level (e.g. within sub-001)
will be transferred <br></p>
<p><u> all_ses </u>: all sessions, but not any non-subject files or folders at the top level will be transferred. Session level
data types may still be transferred if they are specified in data_type<br></p>
<p><u> all_non_ses </u>: Only non-session (and non session-level data_type) folders (or files) will be transferred <br></p>
<p><em>data_type</em></p>
<p><u> all </u>: all data types, at the subject or session level, will be transferred, as well as non-data-type files
at the session level (e.g. within sub-001/ses-001) <br></p>
<p><u> all_data_type </u>: all data types, at the subject or session level, will be transferred. No non-data-type
files or folders at the session level will be transferred. <br></p>
<p><u> all_ses_level_non_data_type </u>: Only non-data-type files or folders at the session level will be transferred. <br></p>
</section>
<section id="filtering-folders-to-transfer-and-using-convenience-tags">
<h3>Filtering folders to transfer and using convenience tags<a class="headerlink" href="#filtering-folders-to-transfer-and-using-convenience-tags" title="Permalink to this heading">#</a></h3>
<p>Similarly, specific subject and sessions to transfer can be selected with sub_names, ses_names and data_type
arguments. Similarly to make_sub_folders(), subject / session names must be prefixed with “sub-” or “ses-” and if this prefix
is not found, it will be added.</p>
<p>For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">download_data</span><span class="p">(</span>
<span class="n">sub_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;all&quot;</span><span class="p">],</span>
<span class="n">ses_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ses-001&quot;</span><span class="p">,</span> <span class="s2">&quot;ses-005&quot;</span><span class="p">],</span>
<span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;behav&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>or equivalently</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datashuttle</span> \
<span class="n">my_project</span> \
<span class="n">download_data</span> \
<span class="o">--</span><span class="n">sub</span><span class="o">-</span><span class="n">names</span> <span class="nb">all</span>
<span class="o">--</span><span class="n">ses</span><span class="o">-</span><span class="n">names</span> <span class="n">ses</span><span class="o">-</span><span class="mi">001</span> <span class="n">ses</span><span class="o">-</span><span class="mi">005</span>
<span class="o">--</span><span class="n">data</span><span class="o">-</span><span class="nb">type</span> <span class="n">behav</span>
</pre></div>
</div>
<p>will only transfer behavioral data type folders, for sessions 1 and 5 from all subjects.</p>
<section id="id1">
<h4>Convenience Tags<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h4>
<p>Similarly to make_sub_folders(), convenience tags can be used to simplfy transfers. For data transfer,
the most useful are the wildcard tag, &#64;*&#64; and the &#64;TO&#64; flag.</p>
<p>The wildcard flag can be used to avoid specifying particular parts of subject / session names that are wanted to
to tbe transferred. This is particularly useful for skipping the <code class="docutils literal notranslate"><span class="pre">date_xxxxxx</span></code> flag that might differ across sessions or subjects.</p>
<p>For example,
<code class="docutils literal notranslate"><span class="pre">project.upload_data(sub_names=&quot;sub-&#64;*&#64;&quot;,</span> <span class="pre">ses_names=&quot;ses-001_date-&#64;*&#64;&quot;,</span> <span class="pre">data_type=&quot;all&quot;)</span></code> or
equivalently <code class="docutils literal notranslate"><span class="pre">datashuttle</span> <span class="pre">my_project</span> <span class="pre">upload_data</span> <span class="pre">--sub_names</span> <span class="pre">sub-&#64;*&#64;</span> <span class="pre">--ses_names</span> <span class="pre">ses-001_date-&#64;*&#64;</span> <span class="pre">--data_type</span> <span class="pre">all</span></code></p>
<p>would transfer all any first session, irregardless of date, or all subjects and all data types.</p>
</section>
</section>
</section>
<section id="transferring-a-specific-file-or-folder">
<h2>Transferring a specific file or folder<a class="headerlink" href="#transferring-a-specific-file-or-folder" title="Permalink to this heading">#</a></h2>
<p>The functions upload_project_folder_or_file() or download_project_folder_or_file() can be used to
transfer a particular, individual file or folder. The path to the file / folder, either full
or relative to the project top level folder, should be input.</p>
</section>
<section id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Permalink to this heading">#</a></h2>
<p>Detailed logs of all configuration changes, folder creation and data transfers are logged
to a .datashuttle folder in the local project folder. These logs are named
with the command (e.g. make_config_file), date and time of creation.</p>
</section>
<section id="convenience-functions">
<h2>Convenience Functions<a class="headerlink" href="#convenience-functions" title="Permalink to this heading">#</a></h2>
<p>Convenience functions can be used to quickly get relevant project information. See the API or CLI documentation
for more information.</p>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#datashuttle-configs">DataShuttle Configs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-file">Configuration File</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-an-ssh-connection">Setting up an SSH Connection</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#making-project-folders">Making Project Folders</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#convenience-tags">Convenience Tags</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-transfer">Data Transfer</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#overwrite-old-files-on-transfer">overwrite_old_files_on_transfer</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transfer-verbosity">transfer_verbosity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#show-transfer-progress">show_transfer_progress</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#all-sub-names-ses-names-and-data-type-keywords">All sub_names, ses_names and data_type keywords</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-folders-to-transfer-and-using-convenience-tags">Filtering folders to transfer and using convenience tags</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Convenience Tags</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#transferring-a-specific-file-or-folder">Transferring a specific file or folder</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#logging">Logging</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#convenience-functions">Convenience Functions</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="sphinx-version">
Created using <a href="https://sphinx-doc.org/">Sphinx</a> 5.3.0.
<br/>
</p>
<p class="theme-version">
Built with the
<a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a>
0.13.3.
</p></div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="things-in-a-row">
    <a href="https://www.sainsburywellcome.org/web/">
        <img src="../_static/light-logo-swc.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-swc.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/gatsby/gatsby-computational-neuroscience-unit">
        <img src="../_static/light-logo-gatsby.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-gatsby.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/">
        <img src="../_static/light-logo-ucl.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-ucl.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
</div></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>