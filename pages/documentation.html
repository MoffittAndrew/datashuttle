

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>User Guide &#8212; datashuttle</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=c5ced968eda925caa686" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=c5ced968eda925caa686" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=c5ced968eda925caa686" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=c5ced968eda925caa686" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=c5ced968eda925caa686" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=c5ced968eda925caa686" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=c5ced968eda925caa686"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'pages/documentation';</script>
    <link rel="canonical" href="https://datashuttle.neuroinformatics.dev/pages/documentation.html" />
    <link rel="shortcut icon" href="../_static/logo_light.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API Reference" href="api_index.html" />
    <link rel="prev" title="DataShuttle Documentation" href="../index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo_light.png" class="logo__image only-light" alt=""/>
    <script>document.write(`<img src="../_static/logo_dark.png" class="logo__image only-dark" alt=""/>`);</script>
  
  
    <p class="title logo__title">Datashuttle v0.2.0</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api_index.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="cli_index.html">
                        CLI Reference
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/neuroinformatics-unit/datashuttle" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api_index.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="cli_index.html">
                        CLI Reference
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/neuroinformatics-unit/datashuttle" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">User Guide</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="user-guide">
<h1>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this heading">#</a></h1>
<p>Datashuttle is a tool to help standardise neuroscience project folders.</p>
<p>Datashuttle’s goal is to alleviate the burden of maintaining
sharable experimental project folders by:</p>
<ul class="simple">
<li><p>Automating the creation of standardised project folders.</p></li>
<li><p>Allowing convenient transfer of data between machines.</p></li>
<li><p>Eliminating the requirement to manually combine data collected across
different acquisition machines.</p></li>
</ul>
<p>Datashuttle aims to integrate seamlessly into existing neuroscience data
collection and analysis workflows.</p>
<section id="datashuttles-place-in-neuroscience-pipelines">
<h2>Datashuttle’s place in neuroscience pipelines<a class="headerlink" href="#datashuttles-place-in-neuroscience-pipelines" title="Permalink to this heading">#</a></h2>
<p>A typical setup in systems neuroscience is that multiple acquisition
machines collect experimental data (e.g. separate machines for acquiring
behaviour and electrophysiology).</p>
<p>The data from these separate machines are then combined
in a central storage machine - this may be a particular computer
in the lab or a high-performance computing (HPC) system.</p>
<p>Following data collection, the entire project or subsets of the data are downloaded
to other machines (e.g. a researcher’s laptop) for analysis.</p>
<img alt="datashuttle central and local machines" class="img-responsive" src="https://github.com/neuroinformatics-unit/datashuttle/assets/29216006/51b65a6d-492a-4047-ae7b-16273b58e258" />
<p>Datashuttle facilitates the creation of standardised project folders and data transfer between
acquisition, central storage and analysis machines.</p>
<p>Datashuttle manages datasets that are formatted according to the
<a class="reference external" href="https://neuroblueprint.neuroinformatics.dev/">NeuroBlueprint</a> specification.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header sd-bg-info sd-bg-text-info">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-info" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z"></path></svg></span>Data specifications for neuroscience<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">A data specification details the folder structure and naming scheme for a project.
The most widely used specification for data-sharing in neuroscience is the <a class="reference external" href="https://bids.neuroimaging.io/">BIDS</a> specification.
First developed  for human imaging, it has since been extended to other methodologies used in
human experimental neuroscience (e.g. EEG, MEG) .</p>
<p class="sd-card-text">Extensions to systems neuroscience datatypes are currently in progress
(e.g. <a class="reference external" href="https://bids-specification.readthedocs.io/en/stable/04-modality-specific-files/10-microscopy.html">microscopy</a>,
<a class="reference external" href="https://bep032tools.readthedocs.io/en/latest/">electrophysiology BEP</a>).</p>
<p class="sd-card-text">While BIDS is an excellent, extensive formal specification, the detailed requirements necessary for data-sharing
are difficult to maintain during data-acquisition. It is also yet to be fully extended to
systems neuroscience.</p>
<p class="sd-card-text">Therefore, we have introduced <a class="reference external" href="https://neuroblueprint.neuroinformatics.dev/">NeuroBlueprint</a>,
a lightweight specification heavily inspired by BIDS for use during data acquisition. Organising
data according to <a class="reference external" href="https://neuroblueprint.neuroinformatics.dev/">NeuroBlueprint</a> during acquisition
will facilitate conversion to full BIDS for data sharing if required.</p>
</div>
</details><br>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">#</a></h1>
<p>We recommend you install Datashuttle inside a <a class="reference external" href="https://docs.conda.io/en/latest/">conda</a>
or <a class="reference external" href="https://mamba.readthedocs.io/en/latest/index.html">mamba</a> environment.</p>
<p>In the following we assume you have <code class="docutils literal notranslate"><span class="pre">conda</span></code> installed,
but the same commands will also work with <code class="docutils literal notranslate"><span class="pre">mamba</span></code>/<code class="docutils literal notranslate"><span class="pre">micromamba</span></code>.</p>
<p>First, create and activate an environment.
You can call your environment whatever you like, we’ve used “datashuttle-env”.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>datashuttle-env<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.10<span class="w"> </span>rclone
conda<span class="w"> </span>activate<span class="w"> </span>datashuttle-env
</pre></div>
</div>
<p>Next install the <code class="docutils literal notranslate"><span class="pre">datashuttle</span></code> package:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
Users</label><div class="sd-tab-content docutils">
<p>To get the latest release from PyPI:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>datashuttle
</pre></div>
</div>
<p>If you have an older version of <code class="docutils literal notranslate"><span class="pre">datashuttle</span></code> installed in the same environment,
you can update to the latest version with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>datashuttle
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
Developers</label><div class="sd-tab-content docutils">
<p>To get the latest development version, clone the
<a class="reference external" href="https://github.com/neuroinformatics-unit/datashuttle/">GitHub repository</a>
and then run from inside the repository:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.<span class="o">[</span>dev<span class="o">]</span><span class="w">  </span><span class="c1"># works on most shells</span>
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;.[dev]&#39;</span><span class="w">  </span><span class="c1"># works on zsh (the default shell on macOS)</span>
</pre></div>
</div>
<p>This will install the package in editable mode, including all <code class="docutils literal notranslate"><span class="pre">dev</span></code> dependencies.</p>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="setup">
<h1>Setup<a class="headerlink" href="#setup" title="Permalink to this heading">#</a></h1>
<p>The first thing to do when starting with Datashuttle is to setup a new project on a <em>local</em> machine.</p>
<p>First, we need to tell Datashuttle the path to the project folder on our <em>local</em> machine
and how we want to connect to the <em>central</em> storage machine.</p>
<section id="local-machines-and-the-central-machine">
<h2><em>local</em> machines and the <em>central</em> machine<a class="headerlink" href="#local-machines-and-the-central-machine" title="Permalink to this heading">#</a></h2>
<p>Datashuttle makes the distinction between  <em>local</em> machines and a single <em>central</em> machine.
There may be multiple <em>local</em> machines, but only one <em>central</em> machine.</p>
<p><em>local</em> machines are typically acquisition and analysis machines, whereas the
<em>central</em> machine is used for data storage.</p>
<p>Datashuttle needs to be setup once for each <em>local</em> machine, but requires no
setup on the <em>central</em> machine.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header sd-bg-info sd-bg-text-info">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-info" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z"></path></svg></span>Example: Datashuttle use in a neuroscience project<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Imagine an experiment in which two different types of data, behavioural and
electrophysiological, are collected on separate acquisition PCs.
These data are sent to a central server where they are combined
and stored.</p>
<p class="sd-card-text">Later, a subset of the data is transferred to a third machine for analysis. It is
usually necessary to only download  a subset of the data for particular analyses
(e.g. “I want to transfer subjects 1-5, sessions 5, behavioural data
to my laptop”.)</p>
<p class="sd-card-text">In this case, the behavioural and electrophysiological acquisition machine and
analysis machines are <em>local</em>; the central storage machine is the <em>central</em> machine.</p>
</div>
</details></section>
<section id="setting-up-datashuttle">
<h2>Setting up Datashuttle<a class="headerlink" href="#setting-up-datashuttle" title="Permalink to this heading">#</a></h2>
<p>A one-time setup on each <em>local</em> machine used is required, specifying the
<code class="docutils literal notranslate"><span class="pre">project_name</span></code> and configs (short for ‘configurations’).</p>
<p>To interact with Datashuttle, a cross-platform command line interface (CLI)
and a Python API are available (see <a class="reference internal" href="api_index.html#api-reference"><span class="std std-ref">API</span></a> and <a class="reference internal" href="cli_index.html#cli-reference"><span class="std std-ref">CLI</span></a>
for reference documentation).</p>
<p>To setup, we can use the <code class="docutils literal notranslate"><span class="pre">make-config-file</span></code> command to tell Datashuttle our project details.</p>
<p>We need to tell Datashuttle:</p>
<ul class="simple">
<li><p>The paths to the <em>local</em> and <em>central</em> folders that contain the project.</p></li>
<li><p>How to connect to the <em>central</em> machine.</p></li>
<li><p>The settings that specify how data is transferred.</p></li>
<li><p>The <em><a class="reference internal" href="#datatype-folders"><span class="std std-ref">datatypes</span></a></em> that will be used in the project, e.g. behaviour (<code class="docutils literal notranslate"><span class="pre">behav</span></code>) or electrophysiology (<code class="docutils literal notranslate"><span class="pre">ephys</span></code>).</p></li>
</ul>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-2">
Python API</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datashuttle</span> <span class="kn">import</span> <span class="n">DataShuttle</span>

<span class="n">project</span> <span class="o">=</span> <span class="n">DataShuttle</span><span class="p">(</span><span class="s2">&quot;my_first_project&quot;</span><span class="p">)</span>

<span class="n">project</span><span class="o">.</span><span class="n">make_config_file</span><span class="p">(</span>
	<span class="n">local_path</span><span class="o">=</span><span class="s2">&quot;/path/to/my_projects/my_first_project&quot;</span><span class="p">,</span>
	<span class="n">central_path</span><span class="o">=</span><span class="s2">&quot;/central/live/username/my_projects/my_first_project&quot;</span><span class="p">,</span>
	<span class="n">connection_method</span><span class="o">=</span><span class="s2">&quot;local_filesystem&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-3">
CLI (macOS / Linux)</label><div class="sd-tab-content docutils">
<p>macOS and Linux, <code class="docutils literal notranslate"><span class="pre">\</span></code> allows the command to continue on a new line.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle \</span>
<span class="go">my_first_project \</span>
<span class="go">make-config-file \</span>
<span class="go">/path/to/my_projects/my_first_project \</span>
<span class="go">/central/live/username/my_projects/my_first_project \</span>
<span class="go">local_filesystem</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-4" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-4">
CLI (Windows)</label><div class="sd-tab-content docutils">
<p>On Windows, the <code class="docutils literal notranslate"><span class="pre">^</span></code> character allows the command to continue on a new line.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle ^</span>
<span class="go">my_first_project ^</span>
<span class="go">make-config-file ^</span>
<span class="go">C:\path\to\my_projects\my_first_project ^</span>
<span class="go">/central/live/username/my_projects/my_first_project ^</span>
<span class="go">local_filesystem</span>
</pre></div>
</div>
</div>
</div>
<section id="required-arguments">
<h3>Required Arguments<a class="headerlink" href="#required-arguments" title="Permalink to this heading">#</a></h3>
<p><strong>local_path</strong>: The full file path to the project folder on the <em>local</em> machine,
including the project folder. The project folder must have the same name as the
Datashuttle project. For example, if your project name is <code class="docutils literal notranslate"><span class="pre">my_first_project</span></code>,
and the project folder resides in <code class="docutils literal notranslate"><span class="pre">C:\User\my_projects</span></code>, the <code class="docutils literal notranslate"><span class="pre">local_path</span></code>
should be <code class="docutils literal notranslate"><span class="pre">C:\User\my_projects\my_first_project</span></code>.</p>
<p><strong>central_path</strong>: The path on the <em>central</em> machine to the project folder. Similar to the
<code class="docutils literal notranslate"><span class="pre">local_path</span></code>, the path must point to the project folder that has the same name as
the project in Datashuttle. For example, if your project is called <code class="docutils literal notranslate"><span class="pre">my_first_project</span></code>,
connecting to a remote Linux server, the <code class="docutils literal notranslate"><span class="pre">central_path</span></code> may be
<code class="docutils literal notranslate"><span class="pre">/hpc/home/user/my_projects/my_first_project</span></code>.</p>
<p><strong>connection_method</strong>: <code class="docutils literal notranslate"><span class="pre">local_filesystem</span></code> or <code class="docutils literal notranslate"><span class="pre">ssh</span></code>. Local filesystem can be used
if the <em>central</em> storage is mounted to the local machine. Otherwise <code class="docutils literal notranslate"><span class="pre">ssh</span></code> can be used.
See <a class="reference internal" href="#setting-up-the-connection-to-central"><span class="std std-ref">setting up the connection to central</span></a> for
more information.</p>
</section>
<section id="optional-arguments">
<h3>Optional Arguments<a class="headerlink" href="#optional-arguments" title="Permalink to this heading">#</a></h3>
<p>If connection method is <code class="docutils literal notranslate"><span class="pre">ssh</span></code>, the <strong>central_host_id</strong> and <strong>central_host_username</strong>
must be set. See the <a class="reference internal" href="#ssh"><span class="std std-ref">SSH section</span></a> for details.</p>
<p>The optional arguments <strong>overwrite_old_files</strong>, <strong>transfer_verbosity</strong> and
<strong>show_transfer_progress</strong> determine how data transfer is performed
(see the <a class="reference internal" href="#data-transfer"><span class="std std-ref">Data Transfer</span></a> section for details).</p>
<p>Settings can be edited at any time with the <code class="docutils literal notranslate"><span class="pre">update-config</span></code> command.
Alternatively, custom config files can be supplied using the <code class="docutils literal notranslate"><span class="pre">supply-config</span></code>
command (this simplifies setting up projects across multiple <em>local</em> machines).</p>
</section>
</section>
<section id="setting-up-the-connection-to-central">
<h2>Setting up the connection to <em>central</em><a class="headerlink" href="#setting-up-the-connection-to-central" title="Permalink to this heading">#</a></h2>
<section id="local-filesystem">
<h3>Local Filesystem<a class="headerlink" href="#local-filesystem" title="Permalink to this heading">#</a></h3>
<p>Local filesystem transfers allow transfer of files and folders across the
file system available to the machine. This is used when the <em>central</em> machine is
setup as a mounted drive. This is a common form of communication between
client machines and a server, such as a high-performance computer
(HPC, also often called a <em>cluster</em>).</p>
<p>When a <em>central</em> machine is mounted to the <em>local</em> machine, the folders of the
<em>central</em> machine are available as if they were part of the <em>local</em> filesystem.
In this case, the <code class="docutils literal notranslate"><span class="pre">central_path</span></code> configuration (see <code class="docutils literal notranslate"><span class="pre">make-config-file</span></code>)
can simply be set to the path directed to the mounted drive.</p>
<p>With the <code class="docutils literal notranslate"><span class="pre">connection_method</span></code> set to <code class="docutils literal notranslate"><span class="pre">local_filesystem</span></code>, data transfer will
proceed between the <em>local</em> machine filesystem and mounted drive.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header sd-bg-info sd-bg-text-info">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-info" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z"></path></svg></span>Local Filesystem Example<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Imagine your <em>central</em> data store is a HPC cluster. Your projects are stored in your
home drive, with the project folder at <code class="docutils literal notranslate"><span class="pre">/system/home/username/my_projects/my_first_project</span></code>.</p>
<p class="sd-card-text">You have mounted your home drive, <code class="docutils literal notranslate"><span class="pre">/system/home/username</span></code> to your local filesystem,
at the path <code class="docutils literal notranslate"><span class="pre">X:\username</span></code>.</p>
<p class="sd-card-text">In this case, you can set the <code class="docutils literal notranslate"><span class="pre">central_path</span></code> to <code class="docutils literal notranslate"><span class="pre">X:\username\my_projects\my_first_project</span></code>
and set <code class="docutils literal notranslate"><span class="pre">connection_method</span></code> to <code class="docutils literal notranslate"><span class="pre">local_filesystem</span></code> to transfer data from
<em>local</em> to <em>central</em>.</p>
</div>
</details></section>
<section id="ssh">
<h3>SSH<a class="headerlink" href="#ssh" title="Permalink to this heading">#</a></h3>
<p>An alternative method of connecting to the <em>central</em> machine is the Secure Shell (SSH).
To use the SSH connection protocol, additional configs must be provided that
tell Datashuttle how to connect.</p>
<p><strong>central_host_id:</strong> This is the address of the server you want to connect to.</p>
<p><strong>central_host_username:</strong> This is your profile name on the server you want to
connect to.</p>
<p>In Datashuttle, the
<code class="docutils literal notranslate"><span class="pre">connection_method</span></code> configuration must be set to <code class="docutils literal notranslate"><span class="pre">&quot;ssh&quot;</span></code>
to use the SSH protocol for data transfers.</p>
<p>Prior to using the SSH protocol, the host ID must be accepted and your
user account password entered. This is only required once, following this
SSH key-pairs will be used to connect via SSH. The
command <code class="docutils literal notranslate"><span class="pre">setup-ssh-connection-to-central-server</span></code> can be used to
setup an SSH connection to the <em>central</em> machine.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header sd-bg-info sd-bg-text-info">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-info" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z"></path></svg></span>SSH Example<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">When setting up a project for SSH connection, the <code class="docutils literal notranslate"><span class="pre">central_host_id</span></code>
and <code class="docutils literal notranslate"><span class="pre">central_host_username</span></code> must be provided:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-5" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-5">
Python API</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">make_config_file</span><span class="p">(</span>
	<span class="n">local_path</span><span class="o">=</span><span class="s2">&quot;/path/to/my_projects/my_first_project&quot;</span><span class="p">,</span>
	<span class="n">central_path</span><span class="o">=</span><span class="s2">&quot;/central/live/username/my_projects/my_first_project&quot;</span><span class="p">,</span>
	<span class="n">connection_method</span><span class="o">=</span><span class="s2">&quot;ssh&quot;</span><span class="p">,</span>
	<span class="n">central_host_id</span><span class="o">=</span><span class="s2">&quot;ssh.swc.ucl.ac.uk&quot;</span><span class="p">,</span>
	<span class="n">central_host_username</span><span class="o">=</span><span class="s2">&quot;username&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-6" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-6">
CLI (macOS / Linux)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle \</span>
<span class="go">my_first_project \</span>
<span class="go">make-config-file \</span>
<span class="go">/path/to/my_projects/my_first_project \</span>
<span class="go">/central/live/username/my_projects/my_first_project \</span>
<span class="go">ssh \</span>
<span class="go">--central_host_id ssh.swc.ucl.ac.uk \</span>
<span class="go">--central_host_username username</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-7" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-7">
CLI (Windows)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle ^</span>
<span class="go">my_first_project ^</span>
<span class="go">make-config-file ^</span>
<span class="go">C:\path\to\my_projects\my_first_project ^</span>
<span class="go">/central/live/username/my_projects/my_first_project ^</span>
<span class="go">ssh ^</span>
<span class="go">--central_host_id ssh.swc.ucl.ac.uk ^</span>
<span class="go">--central_host_username username</span>
</pre></div>
</div>
</div>
</div>
<p class="sd-card-text">Next, a one-time command to setup the SSH connection must be run:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-8" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-8">
Python API</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">setup_ssh_connection_to_central_server</span><span class="p">()</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-9" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-9">
CLI (macOS / Linux / Windows)</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datashuttle</span> <span class="n">my_new_project</span> <span class="n">setup</span><span class="o">-</span><span class="n">ssh</span><span class="o">-</span><span class="n">connection</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">central</span><span class="o">-</span><span class="n">server</span>
</pre></div>
</div>
</div>
</div>
<p class="sd-card-text">Running <code class="docutils literal notranslate"><span class="pre">setup-ssh-connection-to-central-server</span></code> will require verification
that the SSH server connected to is correct (pressing <code class="docutils literal notranslate"><span class="pre">y</span></code> to proceed).</p>
<p class="sd-card-text">Next, your password to the <em>central</em> machine will be requested.
This command sets up SSH key pairs between <em>local</em> and <em>central</em> machines.</p>
<p class="sd-card-text">Password-less SSH communication is setup and no further configuration should be
necessary for SSH transfer.</p>
</div>
</details><p>Next, we can start setting up the project by automatically creating standardised
project folder trees.</p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="creating-subject-and-session-folders">
<h1>Creating <em>subject</em> and <em>session</em> folders<a class="headerlink" href="#creating-subject-and-session-folders" title="Permalink to this heading">#</a></h1>
<p>In a typical neuroscience experiment, data collection sessions begin by
creating the folder for the current <em>subject</em> (e.g. mouse, rat) and current <em>session</em>.</p>
<p>The command <code class="docutils literal notranslate"><span class="pre">make-folders</span></code> can be used to automatically create standardised
folder trees (see
<a class="reference external" href="https://neuroblueprint.neuroinformatics.dev/">NeuroBlueprint</a> for details on the standardisation scheme).</p>
<p>An example project directory for the behavioural data for the first <em>subject</em>,
first <em>session</em> of an experiment may look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>└── my_first_project/
    └── rawdata/
        └── sub-001/
            └── ses-001_date-20230516/
                └── behav
</pre></div>
</div>
<p>In Datashuttle, this folder tree can be created with the below command
(assuming today’s date is <code class="docutils literal notranslate"><span class="pre">20230516</span></code>):</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-10" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-10">
Python API</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">make_folders</span><span class="p">(</span>
	<span class="n">sub_names</span><span class="o">=</span><span class="s2">&quot;001&quot;</span><span class="p">,</span>
	<span class="n">ses_names</span><span class="o">=</span><span class="s2">&quot;001_@DATE@&quot;</span><span class="p">,</span>
	<span class="n">datatype</span><span class="o">=</span><span class="s2">&quot;behav&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-11" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-11">
CLI (macOS / Linux)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle \</span>
<span class="go">my_first_project \</span>
<span class="go">make-folders -sub 001 -ses 001_@DATE@ -dt behav</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-12" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-12">
CLI (Windows)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle ^</span>
<span class="go">my_first_project ^</span>
<span class="go">make-folders -sub 001 -ses 001_@DATE@ -dt behav</span>
</pre></div>
</div>
</div>
</div>
<p>The leading <code class="docutils literal notranslate"><span class="pre">sub-</span></code> or <code class="docutils literal notranslate"><span class="pre">ses-</span></code> in the provided <em>subject</em> and <em>session</em> names
are optional in the command, these prefixes
will always be added
(i.e. both <code class="docutils literal notranslate"><span class="pre">-sub</span> <span class="pre">001</span></code> and <code class="docutils literal notranslate"><span class="pre">-sub</span> <span class="pre">sub-001</span></code> are valid inputs).</p>
<p>It is possible to automatically create date, time or datetime key-value pairs with the tags
<code class="docutils literal notranslate"><span class="pre">&#64;DATE&#64;</span></code>, <code class="docutils literal notranslate"><span class="pre">&#64;TIME&#64;</span></code> or <code class="docutils literal notranslate"><span class="pre">&#64;DATETIME&#64;</span></code> respectively.
A range of <em>subjects</em> and <em>sessions</em> can be created with the <code class="docutils literal notranslate"><span class="pre">&#64;TO&#64;</span></code> flag.
See the <a class="reference internal" href="#convenience-tags"><span class="std std-ref">convenience tags</span></a> section for more details.</p>
<section id="datatype-folders">
<h2><em>Datatype</em> Folders<a class="headerlink" href="#datatype-folders" title="Permalink to this heading">#</a></h2>
<p><em>Datatype</em> folders contain acquired experimental data and must be named either
<code class="docutils literal notranslate"><span class="pre">behav</span></code>, <code class="docutils literal notranslate"><span class="pre">ephys</span></code>, <code class="docutils literal notranslate"><span class="pre">funcimg</span></code> or <code class="docutils literal notranslate"><span class="pre">anat</span></code>. <em>Datatype</em> folders must be placed
within a <em>session</em> folder.
See the <a class="reference external" href="https://neuroblueprint.neuroinformatics.dev/specification.html#datatype"><em>datatype</em></a> section
of NeuroBlueprint for details.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="data-transfer">
<h1>Data Transfer<a class="headerlink" href="#data-transfer" title="Permalink to this heading">#</a></h1>
<p>Datashuttle offers a convenient way of transferring entire project folders or
subsets of the data.</p>
<p>The main data transfer commands are: <code class="docutils literal notranslate"><span class="pre">upload</span></code>, <code class="docutils literal notranslate"><span class="pre">download</span></code>, <code class="docutils literal notranslate"><span class="pre">upload-all</span></code>,
<code class="docutils literal notranslate"><span class="pre">download-all</span></code>, <code class="docutils literal notranslate"><span class="pre">upload-entire-project</span></code>, <code class="docutils literal notranslate"><span class="pre">download-entire-project</span></code>. The term <em>upload</em> refers to transfer from
<em>local</em> to the <em>remote</em> machine, while <em>download</em> transfers in the opposite direction.</p>
<p>These commands act differently in regard to the <em>top-level-folder</em>. In Datashuttle, the current working
<em>top-level-folder</em> is by default <em>rawdata</em>. The working <em>top-level-folder</em> determines  where folders
are created (e.g. <code class="docutils literal notranslate"><span class="pre">make_folders</span></code>) and how commands transfer data.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header sd-bg-info sd-bg-text-info">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-info" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z"></path></svg></span><em>top-level-folders</em><div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The top-level-folders are the folders immediately under the
project root (i.e. the folders within the folder that has the name of the project).</p>
<p class="sd-card-text"><a class="reference external" href="https://neuroblueprint.neuroinformatics.dev/">NeuroBlueprint</a> defines two main <em>top-level-folders</em>, <em>rawdata</em> and <em>derivatives</em>.
The purpose of <em>rawdata</em> is to store data directly as acquired.
The <em>derivatives</em> folder is used to store the results of processing the <em>rawdata</em>.
This distinction ensures that <em>rawdata</em> is not overwritten during processing, and
makes sharing of <em>rawdata</em> simpler.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>└── my_first_project/
    ├── rawdata/
    │   └── ...
    └── derivatives/
        └── ...
</pre></div>
</div>
<p class="sd-card-text">To change the <em>top-level-folder</em>, the command <code class="docutils literal notranslate"><span class="pre">set-top-level-folder</span></code> can be used. e.g.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle my_first_project set-top-level-folder derivatives</span>
</pre></div>
</div>
<p class="sd-card-text">The <em>top-level-folder</em> setting will remain across Datashuttle sessions.</p>
<p class="sd-card-text">To see the current <em>top-level-folder</em>, the command <code class="docutils literal notranslate"><span class="pre">show-top-level-folder</span></code> can be used.</p>
</div>
</details><p>To quickly transfer the entire project (i.e. everything in all <em>top-level-folders</em>),  <code class="docutils literal notranslate"><span class="pre">upload-entire-project</span></code> and <code class="docutils literal notranslate"><span class="pre">download-entire-project</span></code> can be used.</p>
<p>For example, the command:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-13" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-13">
Python API</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">upload_entire_project</span><span class="p">()</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-14" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-14">
CLI (macOS / Linux / Windows)</label><div class="sd-tab-content docutils">
<p><code class="docutils literal notranslate"><span class="pre">datashuttle</span> <span class="pre">my_first_project</span> <span class="pre">upload-entire-project</span></code></p>
</div>
</div>
<p>when run on the folder tree:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
└── my_first_project/
    ├── rawdata/
    │   └── sub-001/
    │       └── ses-001/
    │           └── my_tracking_video.mp4
    └── derivatives/
        └── sub-001/
            └── tracking_video_results.csv
</pre></div>
</div>
<p>will transfer all files and folders in both the <em>rawdata</em> and <em>derivatives</em> folders from the
<em>local</em> machine to the <em>central</em> machine.</p>
<p>In contrast, <code class="docutils literal notranslate"><span class="pre">upload-all</span></code> and <code class="docutils literal notranslate"><span class="pre">download-all</span></code> will transfer the entire <em>top-level-folder</em>.
For example, if <em>rawdata</em> is the current <em>top-level-folder</em>, <code class="docutils literal notranslate"><span class="pre">upload-all</span></code> will transfer all contents of
<em>rawdata</em> from <em>local</em> to <em>central</em>.</p>
<section id="selective-transfer-of-data-with-upload-and-download">
<h2>Selective transfer of data with <code class="docutils literal notranslate"><span class="pre">upload</span></code> and <code class="docutils literal notranslate"><span class="pre">download</span></code><a class="headerlink" href="#selective-transfer-of-data-with-upload-and-download" title="Permalink to this heading">#</a></h2>
<p>Subsets of <em>subjects</em>, <em>sessions</em> and <em>datatypes</em> can be transferred with
the <code class="docutils literal notranslate"><span class="pre">upload</span></code> and <code class="docutils literal notranslate"><span class="pre">download</span></code> commands.</p>
<p>For example, the call:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-15" name="sd-tab-set-6" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-15">
Python API</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span>
	<span class="n">sub_names</span><span class="o">=</span><span class="s2">&quot;001@TO@003&quot;</span><span class="p">,</span>
	<span class="n">ses_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;005_date-@*@&quot;</span><span class="p">,</span> <span class="s2">&quot;006_date-@*@&quot;</span><span class="p">],</span>
	<span class="n">datatype</span><span class="o">=</span><span class="s2">&quot;behav&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-16" name="sd-tab-set-6" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-16">
CLI (macOS / Linux)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle \</span>
<span class="go">my_first_project \</span>
<span class="go">upload \</span>
<span class="go">-sub 001@TO@003 \</span>
<span class="go">-ses 005_date-@*@ 006_date-@*@* \</span>
<span class="go">-dt behav</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-17" name="sd-tab-set-6" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-17">
CLI (Windows)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle ^</span>
<span class="go">my_first_project ^</span>
<span class="go">upload ^</span>
<span class="go">-sub 001@TO@003 ^</span>
<span class="go">-ses 005_date-@*@ 006_date-@*@* ^</span>
<span class="go">-dt behav</span>
</pre></div>
</div>
</div>
</div>
<p>will <em>upload</em>
behavioural sessions 5 and 6, collected on any date, for subjects 1 to 3.</p>
<p>The keyword <code class="docutils literal notranslate"><span class="pre">all</span></code> can be input in place of a <code class="docutils literal notranslate"><span class="pre">-sub</span></code>, <code class="docutils literal notranslate"><span class="pre">-ses</span></code> or <em>datatype</em>
argument <code class="docutils literal notranslate"><span class="pre">-dt</span></code> to transfer all available subject, sessions or datatypes available.</p>
<p>Often additional files or folders may be stored outside of <em>datatype</em>
folders. The <code class="docutils literal notranslate"><span class="pre">all</span></code> argument will transfer all files and folders at the
specified level. Datashuttle offers a flexible argument syntax for
selecting precise data subsets, see <a class="reference internal" href="#data-transfer-options"><span class="std std-ref">Data Transfer Options</span></a>
for details.</p>
</section>
<section id="transferring-a-specific-file-or-folder">
<h2>Transferring a specific file or folder<a class="headerlink" href="#transferring-a-specific-file-or-folder" title="Permalink to this heading">#</a></h2>
<p>The functions <code class="docutils literal notranslate"><span class="pre">upload-specific-folder-or-file</span></code> or <code class="docutils literal notranslate"><span class="pre">download-specific-folder-or-file</span></code>
can be used to transfer an individual file or folder.</p>
<p>The path to the file or folder (either full or relative to the working <em>top-level-folder</em>)
should be input.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="advanced-usage">
<h1>Advanced Usage<a class="headerlink" href="#advanced-usage" title="Permalink to this heading">#</a></h1>
<section id="convenience-tags">
<h2>Convenience tags<a class="headerlink" href="#convenience-tags" title="Permalink to this heading">#</a></h2>
<p>Datashuttle provides convenience tags that can be included in
<em>subject</em> or <em>session</em> names during folder creation or transfer. These
tags help automate repetitive routines and add flexibility to
data transfers.</p>
<section id="automatically-include-date-time-or-datetime">
<h3>Automatically include <em>date</em>, <em>time</em> or <em>datetime</em><a class="headerlink" href="#automatically-include-date-time-or-datetime" title="Permalink to this heading">#</a></h3>
<p><em>Used when making subject or session folders</em></p>
<p>When creating subject or session folders, it is often desirable to include the
<em>date</em>, <em>time</em>, or <em>datetime</em> as a key-value pair in the folder name. For example:</p>
<p><code class="docutils literal notranslate"><span class="pre">ses-001_date-20230516</span></code></p>
<p>Datashuttle provides convenience tags to automatically format a key-value pair
with the current date or time (as determined from the machine <em>datetime</em>).</p>
<p>For example, the command:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-18" name="sd-tab-set-7" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-18">
Python API</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">make_folders</span><span class="p">(</span>
	<span class="n">sub_names</span><span class="o">=</span><span class="s2">&quot;sub-001&quot;</span><span class="p">,</span>
	<span class="n">ses_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;001_@DATETIME@&quot;</span><span class="p">,</span> <span class="s2">&quot;002_@DATETIME@&quot;</span><span class="p">],</span>
	<span class="n">datatype</span><span class="o">=</span><span class="s2">&quot;behav&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-19" name="sd-tab-set-7" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-19">
CLI (macOS / Linux)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle \</span>
<span class="go">my_first_project \</span>
<span class="go">make_folders \</span>
<span class="go">-sub sub-001 \</span>
<span class="go">-ses 001_@DATETIME@ 002_@DATETIME@ \</span>
<span class="go">-dt behav</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-20" name="sd-tab-set-7" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-20">
CLI (Windows)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle ^</span>
<span class="go">my_first_project ^</span>
<span class="go">make_folders ^</span>
<span class="go">-sub sub-001 ^</span>
<span class="go">-ses 001_@DATETIME@ 002_@DATETIME@ ^</span>
<span class="go">-dt behav</span>
</pre></div>
</div>
</div>
</div>
<p>creates the folder tree (assuming the <em>top-level-folder</em> is <em>rawdata</em>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>└── rawdata/
    └── sub-001/
        ├── ses-001_datetime-20230606T202701/
        │   └── behav
        └── ses-002_datetime-20230606T202701/
            └── behav
</pre></div>
</div>
</section>
<section id="specify-ranges-with-the-to-flag">
<h3>Specify ranges with the <code class="docutils literal notranslate"><span class="pre">&#64;TO&#64;</span></code> flag<a class="headerlink" href="#specify-ranges-with-the-to-flag" title="Permalink to this heading">#</a></h3>
<p><em>When making subject or session folders and transferring data</em></p>
<p>Often it is desirable to specify a range of subject or session names for
folder creation or data transfer.</p>
<p>For example, in a project with 50 subjects (<code class="docutils literal notranslate"><span class="pre">sub-001</span></code>, <code class="docutils literal notranslate"><span class="pre">sub-002</span></code>, <code class="docutils literal notranslate"><span class="pre">...</span></code>, <code class="docutils literal notranslate"><span class="pre">sub-050</span></code>),
the below command transfers only the first 25 subjects:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-21" name="sd-tab-set-8" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-21">
Python API</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span>
	<span class="n">sub_names</span><span class="o">=</span><span class="s2">&quot;001@TO@025&quot;</span><span class="p">,</span>
	<span class="n">ses_names</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
	<span class="n">datatype</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-22" name="sd-tab-set-8" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-22">
CLI (macOS / Linux)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle \</span>
<span class="go">my_first_project \</span>
<span class="go">upload \</span>
<span class="go">-sub 001@TO@025 \</span>
<span class="go">-ses all \</span>
<span class="go">-dt all</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-23" name="sd-tab-set-8" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-23">
CLI (Windows)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle ^</span>
<span class="go">my_first_project ^</span>
<span class="go">upload ^</span>
<span class="go">-sub 001@TO@025 ^</span>
<span class="go">-ses all ^</span>
<span class="go">-dt all</span>
</pre></div>
</div>
</div>
</div>
<p>When making folders with the <code class="docutils literal notranslate"><span class="pre">&#64;TO&#64;</span></code> tag, the maximum number of leading zeros
found either side of the tag will be used for folder creation. For example,
setting <code class="docutils literal notranslate"><span class="pre">-sub</span></code> to <code class="docutils literal notranslate"><span class="pre">0001&#64;TO&#64;02</span></code> will create the subject folders <code class="docutils literal notranslate"><span class="pre">sub-0001</span></code> and <code class="docutils literal notranslate"><span class="pre">sub-0002</span></code>.</p>
</section>
<section id="the-wildcard-flag">
<h3>The wildcard flag <code class="docutils literal notranslate"><span class="pre">&#64;*&#64;</span></code><a class="headerlink" href="#the-wildcard-flag" title="Permalink to this heading">#</a></h3>
<p><em>Used when transferring data</em></p>
<p>When selected subjects and sessions for data transfer, it is often
necessary to match only part of the folder name. In this case, wildcards
can be included in the search term.</p>
<p>For example, we may want to transfer the 5th session for all subjects
in the project folder below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>└── rawdata/
    ├── sub-001  /
    │   ├── ...
    │   └── ses-005_condition-test_date-20230428/
    │       └── behav
    └── sub-002/
        └── ses-005_condition-test_date-20230431/
            └── behav
</pre></div>
</div>
<p>We can use the wildcard tag in the <em>session</em> name to match
everything that comes after the <code class="docutils literal notranslate"><span class="pre">date</span></code> key:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-24" name="sd-tab-set-9" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-24">
Python API</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span>
	<span class="n">sub_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;001&quot;</span><span class="p">,</span> <span class="s2">&quot;002&quot;</span><span class="p">],</span>
	<span class="n">ses_names</span><span class="o">=</span><span class="s2">&quot;005_condition-test_date-@*@&quot;</span><span class="p">,</span>
	<span class="n">datatype</span><span class="o">=</span><span class="s2">&quot;behav&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-25" name="sd-tab-set-9" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-25">
CLI (macOS / Linux)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle \</span>
<span class="go">my_first_project \</span>
<span class="go">upload \</span>
<span class="go">-sub 001 002 \</span>
<span class="go">-ses 005_condition-test_date-@*@ \</span>
<span class="go">-dt behav</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-26" name="sd-tab-set-9" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-26">
CLI (Windows)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle ^</span>
<span class="go">my_first_project ^</span>
<span class="go">upload ^</span>
<span class="go">-sub 001 002 ^</span>
<span class="go">-ses 005_condition-test_date-@*@ ^</span>
<span class="go">-dt behav</span>
</pre></div>
</div>
</div>
</div>
<p>This command would transfer session 5 from subject 001 and 002.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If using the z-shell (zsh) - which is the default shell on macOS -
text including the <code class="docutils literal notranslate"><span class="pre">&#64;*&#64;</span></code> tag must be wrapped in quotation marks.
e.g. <code class="docutils literal notranslate"><span class="pre">--ses</span> <span class="pre">&quot;005_condition-test_date-&#64;*&#64;&quot;</span></code>)</p>
</div>
</section>
</section>
<section id="data-transfer-options">
<h2>Data Transfer Options<a class="headerlink" href="#data-transfer-options" title="Permalink to this heading">#</a></h2>
<p>A number of <a class="reference external" href="https://rclone.org/">Rclone</a> options are exposed in Datashuttle to facilitate flexible data transfer.</p>
<section id="overwriting-existing-files">
<h3>Overwriting existing files<a class="headerlink" href="#overwriting-existing-files" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">overwrite_old_files</span></code> determines whether folders and files are overwritten
during transfer. By default, Datashuttle does not overwrite any existing
folder during data transfer.</p>
<p>For example, if the file <code class="docutils literal notranslate"><span class="pre">sub-001_ses-001_measure-trajectories.csv</span></code> exists on
the <em>central</em> repository, it will never be over-written during upload
from <em>local</em> to <em>central</em>, even if the version on <em>local</em> is newer.</p>
<p>To change this behaviour, the configuration <code class="docutils literal notranslate"><span class="pre">overwrite_old_files</span></code> can be set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
In this case, files in which the  timestamp of the target directory (e.g. <em>central</em>
in our example) will be overwritten if their timestamp is
older than the corresponding file in the source directory.</p>
<p>The configuration can be changed with the <code class="docutils literal notranslate"><span class="pre">update-config</span></code> command.</p>
</section>
<section id="additional-transfer-configurations">
<h3>Additional Transfer Configurations<a class="headerlink" href="#additional-transfer-configurations" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">transfer_verbosity</span></code> : set to <code class="docutils literal notranslate"><span class="pre">&quot;vv&quot;</span></code> for additional detail on the transfer operation.
Set to <code class="docutils literal notranslate"><span class="pre">&quot;v&quot;</span></code> to only see each file that is transferred as well as significant events that occur during transfer.</p>
<p><code class="docutils literal notranslate"><span class="pre">show_transfer_progress</span></code> : When <code class="docutils literal notranslate"><span class="pre">True</span></code>, real-time transfer statistics will be reported and logged.</p>
</section>
<section id="flexible-transfers-with-keyword-arguments">
<h3>Flexible transfers with keyword arguments<a class="headerlink" href="#flexible-transfers-with-keyword-arguments" title="Permalink to this heading">#</a></h3>
<p>Often additional files or folders may be stored outside <em>datatype</em>
folders. The <code class="docutils literal notranslate"><span class="pre">all</span></code> argument will transfer all files and folders at the
specified level.</p>
<p>For example, consider the project below. This project has files
stored within <em>datatype</em> folders, but additional files outside <em>datatype</em>
folders at the <em>subject</em> and <em>session</em> levels.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
└── rawdata/
    ├── a_project_related_file.json
    ├── sub-001/
    │   ├── sub-001_extra-file.json
    │   └── ses-001/
    │       ├── ses-001_extra-file.json
    │       ├── behav/
    │       │   └── ...
    │       └── ephys/
    │           └── ...
    └── sub-002/
        ├── sub-002_extra-file.json
        └── ses-001/
            ├── behav/
            │   └── ...
            ├── ephys/
            │   └── ...
            └── anat/
                └── ...
</pre></div>
</div>
<p>Datashuttle provides a number of keyword arguments to allow separate
handling of files that are not found in <em>datatype</em> folders.</p>
<p>These are:
<code class="docutils literal notranslate"><span class="pre">all_sub</span></code> and <code class="docutils literal notranslate"><span class="pre">all_non_sub</span></code> (for <code class="docutils literal notranslate"><span class="pre">-sub</span></code>), <code class="docutils literal notranslate"><span class="pre">all_ses</span></code> and <code class="docutils literal notranslate"><span class="pre">all_non_ses</span></code> (for <code class="docutils literal notranslate"><span class="pre">-ses</span></code>) and <code class="docutils literal notranslate"><span class="pre">-all_ses_level_non_datatype</span></code> (for <code class="docutils literal notranslate"><span class="pre">-dt</span></code>).</p>
<section id="for-use-with-the-sub-sub-names-flag">
<h4>For use with the <code class="docutils literal notranslate"><span class="pre">-sub</span></code> / <code class="docutils literal notranslate"><span class="pre">--sub-names</span></code> flag<a class="headerlink" href="#for-use-with-the-sub-sub-names-flag" title="Permalink to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">all</span></code> - All <em>subject</em> and non-<em>subject</em> files and folders within the <em>top-level-folder</em>
(e.g. <em>rawdata</em>) will be transferred.</p>
<p><code class="docutils literal notranslate"><span class="pre">all_sub</span></code> - <em>Subject</em>  <u>folders</u> only (i.e. prefixed with <code class="docutils literal notranslate"><span class="pre">sub</span></code>) and everything
within them will be transferred.</p>
<p><code class="docutils literal notranslate"><span class="pre">all_non_sub</span></code> - All files and folders that are not prefixed with <code class="docutils literal notranslate"><span class="pre">sub</span></code>,
within the <em>top-level-folder</em>, will be transferred.
Any folders prefixed with <code class="docutils literal notranslate"><span class="pre">sub</span></code> at this level will not be transferred.</p>
</section>
<section id="for-use-with-the-ses-ses-names-flag">
<h4>For use with the <code class="docutils literal notranslate"><span class="pre">-ses</span></code> / <code class="docutils literal notranslate"><span class="pre">--ses-names</span></code> flag<a class="headerlink" href="#for-use-with-the-ses-ses-names-flag" title="Permalink to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">all</span></code> : All <em>session</em> and non-<em>session</em> files and folders within a <em>subject</em> level folder
(e.g. <code class="docutils literal notranslate"><span class="pre">sub-001</span></code>) will be transferred.</p>
<p><code class="docutils literal notranslate"><span class="pre">all_ses</span></code> : <em>Session</em> <u>folders</u> only (i.e. prefixed with <code class="docutils literal notranslate"><span class="pre">ses</span></code>) and everything within
them will be transferred.</p>
<p><code class="docutils literal notranslate"><span class="pre">all_non_ses</span></code> : All files and folders that are not prefixed with <code class="docutils literal notranslate"><span class="pre">ses</span></code>, within a <em>subject</em> folder,
will be transferred. Any folders prefixed with <code class="docutils literal notranslate"><span class="pre">ses</span></code> will not be transferred.</p>
</section>
<section id="for-use-with-the-dt-datatype-flag">
<h4>For use with the <code class="docutils literal notranslate"><span class="pre">-dt</span></code> / <code class="docutils literal notranslate"><span class="pre">--datatype</span></code> flag<a class="headerlink" href="#for-use-with-the-dt-datatype-flag" title="Permalink to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">all</span></code> : All <em>datatype</em> folders at the <em>subject</em> or <em>session</em> folder level will be transferred,
as well as all files and folders within selected <em>session</em> folders.</p>
<p><code class="docutils literal notranslate"><span class="pre">all_datatype</span></code> : All <em>datatype</em> folders (i.e. folders with the pre-determined name:
<code class="docutils literal notranslate"><span class="pre">behav</span></code>, <code class="docutils literal notranslate"><span class="pre">ephys</span></code>, <code class="docutils literal notranslate"><span class="pre">funcimg</span></code>, <code class="docutils literal notranslate"><span class="pre">anat</span></code>) within a <em>session</em> folder will be
transferred. Non-<em>datatype</em> folders at the <em>session</em> level will not be transferred</p>
<p><code class="docutils literal notranslate"><span class="pre">all_ses_level_non_datatype</span></code> : Non-<em>datatype</em> folders within <em>session</em> folders only will be transferred</p>
<p>Below, a number of examples are given to exemplify how these arguments effect data transfer.
Given our example <em>local</em> project folder above:</p>
<ol class="arabic simple">
<li><p>The first example indicates the effect of selectively transferring non-<em>datatype</em> sessions.</p></li>
<li><p>The command:</p></li>
</ol>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-27" name="sd-tab-set-10" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-27">
Python API</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">project.upload(&quot;all&quot;, &quot;all&quot;, &quot;all_ses_level_non_datatype&quot;)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-28" name="sd-tab-set-10" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-28">
CLI (macOS / Linux)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle \</span>
<span class="go">my_first_project \</span>
<span class="go">upload \</span>
<span class="go">-sub all \</span>
<span class="go">-ses all \</span>
<span class="go">-dt all_ses_level_non_datatype</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-29" name="sd-tab-set-10" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-29">
CLI (Windows)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle ^</span>
<span class="go">my_first_project ^</span>
<span class="go">upload ^</span>
<span class="go">-sub all ^</span>
<span class="go">-ses all ^</span>
<span class="go">-dt all_ses_level_non_datatype</span>
</pre></div>
</div>
</div>
</div>
<p>Would upload:</p>
<ul class="simple">
<li><p>All non-<em>subject</em> files in the <em>top-level</em> folder (i.e. <code class="docutils literal notranslate"><span class="pre">a_project_related_file.json</span></code>.)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">sub-001_extra_file.json</span></code> and <code class="docutils literal notranslate"><span class="pre">sub-002_extra_file.json</span></code></p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">sub-001</span></code>, the file <code class="docutils literal notranslate"><span class="pre">ses-001_extra_file.json</span></code>.
For <code class="docutils literal notranslate"><span class="pre">sub-002</span></code>, no other files are transferred because there is no non-<em>datatype</em> files at the <em>session</em> level.</p></li>
</ul>
<ol class="arabic simple" start="2">
<li><p>The next two examples show the effect of selecting <code class="docutils literal notranslate"><span class="pre">-dt</span> <span class="pre">all</span></code> vs. <code class="docutils literal notranslate"><span class="pre">-dt</span> <span class="pre">all_datatype</span></code>. The command:</p></li>
</ol>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-30" name="sd-tab-set-11" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-30">
Python API</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">project.upload(&quot;sub-001&quot;, &quot;all&quot;, &quot;all&quot;)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-31" name="sd-tab-set-11" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-31">
CLI (macOS / Linux)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle \</span>
<span class="go">my_first_project \</span>
<span class="go">upload \</span>
<span class="go">-sub 001 \</span>
<span class="go">-ses all \</span>
<span class="go">-dt all</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-32" name="sd-tab-set-11" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-32">
CLI (Windows)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle ^</span>
<span class="go">my_first_project ^</span>
<span class="go">upload ^</span>
<span class="go">-sub 001 ^</span>
<span class="go">-ses all ^</span>
<span class="go">-dt all</span>
</pre></div>
</div>
</div>
</div>
<p>Would upload:</p>
<ul class="simple">
<li><p>Contents residing in the <code class="docutils literal notranslate"><span class="pre">sub-001</span></code> folder only.</p></li>
<li><p>The file <code class="docutils literal notranslate"><span class="pre">sub-001_extra-file.json</span></code> and <em>session</em> folders.</p></li>
<li><p>All <em>datatype</em> folder contents (<code class="docutils literal notranslate"><span class="pre">behav</span></code>, <code class="docutils literal notranslate"><span class="pre">ephys</span></code>) and non-<em>datatype</em> files (<code class="docutils literal notranslate"><span class="pre">ses-001_extra-file.json</span></code>).</p></li>
</ul>
<p>The command:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-33" name="sd-tab-set-12" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-33">
Python API</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">make_folders</span><span class="p">(</span>
	<span class="n">sub_names</span><span class="o">=</span><span class="s2">&quot;001&quot;</span><span class="p">,</span>
	<span class="n">ses_names</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
	<span class="n">datatype</span><span class="o">=</span><span class="s2">&quot;all_datatype&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-34" name="sd-tab-set-12" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-34">
CLI (macOS / Linux)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle \</span>
<span class="go">my_first_project \</span>
<span class="go">upload \</span>
<span class="go">-sub 001 \</span>
<span class="go">-ses all \</span>
<span class="go">-dt all_datatype</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-35" name="sd-tab-set-12" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-35">
CLI (Windows)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle ^</span>
<span class="go">my_first_project ^</span>
<span class="go">upload ^</span>
<span class="go">-sub 001 ^</span>
<span class="go">-ses all ^</span>
<span class="go">-dt all_datatype</span>
</pre></div>
</div>
</div>
</div>
<p>Would upload:</p>
<ul class="simple">
<li><p>Contents residing in the <code class="docutils literal notranslate"><span class="pre">sub-001</span></code> folder only.</p></li>
<li><p>The <em>session</em> folder and all <em>datatype</em> folder contents (<code class="docutils literal notranslate"><span class="pre">behav</span></code>, <code class="docutils literal notranslate"><span class="pre">ephys</span></code>)
but not the non-<em>datatype</em> file <code class="docutils literal notranslate"><span class="pre">ses-001_extra-file.json</span></code>.</p></li>
</ul>
<ol class="arabic simple" start="3">
<li><p>The final example shows the effect of transferring <code class="docutils literal notranslate"><span class="pre">all_non_sub</span></code> files only. The command:</p></li>
</ol>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-36" name="sd-tab-set-13" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-36">
Python API</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">make_folders</span><span class="p">(</span>
	<span class="n">sub_names</span><span class="o">=</span><span class="s2">&quot;all_non_sub&quot;</span><span class="p">,</span>
	<span class="n">ses_names</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
	<span class="n">datatype</span><span class="o">=</span><span class="s2">&quot;all&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-37" name="sd-tab-set-13" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-37">
CLI (macOS / Linux)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle \</span>
<span class="go">my_first_project \</span>
<span class="go">upload \</span>
<span class="go">-sub all_non_sub \</span>
<span class="go">-ses all \</span>
<span class="go">-dt all</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-38" name="sd-tab-set-13" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-38">
CLI (Windows)</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">datashuttle ^</span>
<span class="go">my_first_project ^</span>
<span class="go">upload ^</span>
<span class="go">-sub all_non_sub ^</span>
<span class="go">-ses all ^</span>
<span class="go">-dt all</span>
</pre></div>
</div>
</div>
</div>
<p>Would upload:</p>
<ul class="simple">
<li><p>the file <code class="docutils literal notranslate"><span class="pre">a_project_related_file.json</span></code> only.</p></li>
</ul>
</section>
</section>
</section>
<section id="query-datashuttle-for-current-settings">
<h2>Query Datashuttle for current settings<a class="headerlink" href="#query-datashuttle-for-current-settings" title="Permalink to this heading">#</a></h2>
<p>A number of commands exist to query Datashuttle’s current configs.
For example the <code class="docutils literal notranslate"><span class="pre">show-local-path</span></code> command will print the currently set <em>local</em> path to the terminal.
The command <code class="docutils literal notranslate"><span class="pre">show-configs</span></code> will print all currently set configs.</p>
<p>For a full list of available commands, see the <a class="reference internal" href="api_index.html#api-reference"><span class="std std-ref">API reference</span></a> or <a class="reference internal" href="cli_index.html#cli-reference"><span class="std std-ref">CLI reference</span></a>.</p>
</section>
<section id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Permalink to this heading">#</a></h2>
<p>Detailed logs of all configuration changes, folder creation and data transfers are stored
to the <code class="docutils literal notranslate"><span class="pre">.datashuttle</span></code> folder that is created in the <em>local</em> project folder.</p>
<p>The log itself contains relevant information pertaining to that command.
For example, if the commands <code class="docutils literal notranslate"><span class="pre">make_folders</span></code>, <code class="docutils literal notranslate"><span class="pre">upload</span></code>, <code class="docutils literal notranslate"><span class="pre">download</span></code> were run sequentially,
the logs output folder would look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">20230608</span><span class="n">T095514_make</span><span class="o">-</span><span class="n">folders</span><span class="o">.</span><span class="n">log</span>
<span class="mi">20230608</span><span class="n">T095545_upload</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">log</span>
<span class="mi">20230608</span><span class="n">T095621_download</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">DataShuttle Documentation</p>
      </div>
    </a>
    <a class="right-next"
       href="api_index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">API Reference</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">User Guide</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#datashuttles-place-in-neuroscience-pipelines">Datashuttle’s place in neuroscience pipelines</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">Setup</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#local-machines-and-the-central-machine"><em>local</em> machines and the <em>central</em> machine</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-datashuttle">Setting up Datashuttle</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-the-connection-to-central">Setting up the connection to <em>central</em></a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-subject-and-session-folders">Creating <em>subject</em> and <em>session</em> folders</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#datatype-folders"><em>Datatype</em> Folders</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#data-transfer">Data Transfer</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selective-transfer-of-data-with-upload-and-download">Selective transfer of data with <code class="docutils literal notranslate"><span class="pre">upload</span></code> and <code class="docutils literal notranslate"><span class="pre">download</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#transferring-a-specific-file-or-folder">Transferring a specific file or folder</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#advanced-usage">Advanced Usage</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#convenience-tags">Convenience tags</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-transfer-options">Data Transfer Options</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#query-datashuttle-for-current-settings">Query Datashuttle for current settings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#logging">Logging</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=c5ced968eda925caa686"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=c5ced968eda925caa686"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="sphinx-version">
Created using <a href="https://sphinx-doc.org/">Sphinx</a> 5.3.0.
<br/>
</p>
<p class="theme-version">
Built with the
<a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a>
0.14.2.
</p></div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="things-in-a-row">
    <a href="https://www.sainsburywellcome.org/web/">
        <img src="../_static/light-logo-swc.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-swc.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/gatsby/gatsby-computational-neuroscience-unit">
        <img src="../_static/light-logo-gatsby.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-gatsby.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/">
        <img src="../_static/light-logo-ucl.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-ucl.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
</div></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>